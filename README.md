# üì¶ Barrel File Performance Test\n\nThis repository contains a sample React/Next.js project used to measure the **bundle size** and **build time** impact of using [barrel files](https://basarat.gitbook.io/typescript/main-1/barrel) (`index.ts`) versus direct imports.\n\n## üß™ Project Structure\n\nThe test setup includes:\n\n- `components/` folder with 10 dummy component files\n- Two variations:\n  - **Direct Import**: Only one component is imported directly\n  - **Barrel Import**: All 10 components are re-exported via `index.ts`, but only one is imported\n\n## üìä Metrics Collected\n\n- **Bundle Size** (using `@next/bundle-analyzer`)\n- **Build Time** (100 build runs using Node script)\n\n## üì∑ Visual Results\n\nVisualizations of the results can be found in the [`/post_images/barrel-files`](./post_images/barrel-files) directory:\n\n- `direct_import.png` and `barrel_import.png`: Bundle size comparisons\n- `build_time.png`: Probability density function comparing build times\n- `circular_direct.png` and `circular_barrel.png`: Impact of circular imports on bundle size\n- `dependency_diagram.png`: Diagram illustrating circular import risks\n\n## üìà Key Findings\n\n- Barrel files increase bundle size when unused exports are bundled\n- Minor but measurable increase in build time (~80ms on average)\n- Circular imports significantly bloat bundle size (~53% increase)\n- Next.js‚Äôs [`optimizePackageImports`](https://vercel.com/blog/how-we-optimized-package-imports-in-next-js#measuring-performance-improvements) can help mitigate barrel drawbacks\n\n## üîß How to Run\n\nInstall dependencies:\n\n```bash\nnpm install\n```\n\nAnalyze bundle:\n\n```bash\nANALYZE=true npm run build\n```\n\nRun build time test:\n\n```bash\nnode measureBuildTime.js\n```\n\n> Ensure no other major processes are running to avoid skewing build time results.\n\n## üìÅ File Overview\n\n| File / Folder            | Description                                 |\n|--------------------------|---------------------------------------------|\n| `/components`            | Dummy components and optional `index.ts`    |\n| `/scripts/measureBuildTime.js` | Node script for benchmarking build times |\n| `/next.config.js`        | Next.js config with optional analyzer setup |\n| `/post_images/`          | Screenshots of build and bundle results     |\n\n## ‚úÖ Conclusion\n\nBarrel files can clean up your imports and simplify large projects, but they come with performance tradeoffs. This repo serves as a reproducible testbed for measuring those tradeoffs in a real Next.js environment.
